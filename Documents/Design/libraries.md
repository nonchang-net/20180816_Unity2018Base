# 設計: ライブラリ選定など



## 言語バージョン、基本パッケージの選定

個人開発なのでリスク無視でpreview package含めて導入していく。

- C#7
	- Build Settingで.net 4.xを選択。
	- Async/Await多用していく。
	- タプル、匿名メソッドなど

- Incremental Compiler導入

- `学習中` JOB System, ECS, Burstコンパイラを検証・利用していきたい。



## 外部ライブラリの導入について

- 基本的には、外部ライブラリへの **依存** は極力減らしたい。
	- 依存性が低ければ、いくらでも導入して良いと思う。
		- 例: アプリの一部分で固有の複雑な問題があったとして、アセット買えば解決できるなら買うべきだ。



## 選定メモ: Tween系ライブラリ何使う？ DOTween入れる？

2018/08/18検討中。一旦DOTweenのfree版を入れてみる。

- 入れてもいい。
	- Animationキー打つほどでもない簡単なアニメが欲しい時ってたくさんある。。
	- Tween系ライブラリだとDOTween使ってる今の現場が、一番手頃で安心感がある印象。
	- しかし、SimpleAnimationとかでサクッと代替できたりしないかなぁ……？

- より良い代替があれば考える。
	- あれ？ DOTween freeだとコンポーネントないの？？
	- http://dotween.demigiant.com/pro.php
	- そういうことみたい……だなぁ。じゃあいらないかな……買うか自作するかなので工数次第。



## 選定メモ: Zenjectの導入は見送る。

2018/08/18判断。後日変わる可能性はもちろんある。

Zenjectの導入はチーム開発では素晴らしい。難点もあるので一旦保留。

### 概要

[aiming: Unity3DのDIフレームワーク、Zenjectの紹介](https://developer.aiming-inc.com/unity/zenject/)

素晴らしいDIフレームワーク。悩んだけど個人開発ではやめとこうと判断。

- まず、導入メリットは非常にたくさんある。
	- 現場で使った感想としては、自然とスパゲティコードを回避できる仕組みとルールとして機能する。
	- それなりの規模のチームなら入れるべきだ。
	- Zenjectのルールはよくできていて、大規模開発でもコンポーネントを安全に使いまわせるし、厄介な初期化周りのフローの設計を一任出来る。
	- 個人開発でZenjectやりたいかというと、どうかなぁ。

- チームにZenjectをきっちりマスターした人が必要になる。
	- 俺はそこまで詳しくない。時間割けてない。辛い。
	- 逆に言えば、ここを担保できれば以下の問題は大体解決すると思う。
	
- 保守性
	- 俺はそこまで詳しくない。
	- 外部ツールを入れたら仕方ないところではある。
	- バージョンアップ追従でトラブったり、考え方を変える必要が生じたケースがある。

- なくてもかけそう
	- 初期化フロー周辺については、Async/Awaitで担保できる。
		- 非同期が絡んで混乱した現場をなんども見てきたし、そういう現場にZenjectの素晴らしさは伝えるべきだと思っている。ただ、Async/Awaitでラップし続ければ読み下せるコードに集約できる感触もある。

- 外部ライブラリは極力減らしたい。
	- Zenjectは依存性どころではなく土台である。全体をZenject前提で考える必要がある。

- ボイラープレートコードが面倒
	- Zenjectのルールを守らないとエラーメッセージも機能しない。慣れが必要。


## 選定メモ: UniRxは導入する。

2018/08/18判断。後日変わる可能性はもちろんある。

## 概要

- Unity2018でC#7(.net 4.x)を採用するならAsync/Awaitば便利なので、UniTaskを使いたい。
	- [neue.cc: UniTask - Unity + async/awaitの完全でハイパフォーマンスな統合](http://neue.cc/2018/07/12_567.html)

- Reactive Propertyで多くのことがシンプルになる。

- Rxはあまり多用しない方向かな……。ちょっと経験不足。
	- Rxで簡単に書ける問題にはどんどん適用したい。

- UniRxの導入は「外部ライブラリは極力減らしたい」というルールから外れる。
	- Zenjectと違ってフレームワークではないとはいえ、一度導入すればUniRx導入を前提したコードになるのは間違いない。
	- UniTaskは一括置換できる可能性もありそうだけど、Reactive Property前提のコードが増えたら置き換えは一苦労ありそう。
	- **つまり、もしUniRxを外す必要が生じたら書き換えていく覚悟と責務を背負う判断**となる。
	- その覚悟に見合うメリットはある。
